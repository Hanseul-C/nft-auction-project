<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="project.spring.nft.AuctionMapper">
	
	<insert id="insert">
		insert into ${auction} (${artNo}, ${memberId}, ${auctionMoney})
		values(#{artNo}, #{memberId}, #{auctionMoney})
	</insert>
	
	<update id="update_nickname">
		update ${auction}
		set ${memberNickname} = (
			select ${memberNickname}
			from ${member}
			where ${memberId}=#{memberId}
		)
		where ${memberId}=#{memberId}
	</update>
	
	<select id="select_all_by_art_no" resultType="AuctionVO">
		select *
		from ${auction}
		where ${artNo}=#{artNo}
		order by ${auctionMoney} desc
	</select>
	
	<!-- 현재 최고입찰가 -->
	<select id="select_max_money" resultType="Integer">
		select max(${auctionMoney})
		from ${auction}
		where ${artNo}=#{artNo}
	</select>
</mapper>